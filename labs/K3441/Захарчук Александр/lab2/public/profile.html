<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å - –ö—É–ª–∏–Ω–∞—Ä–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="dark.css" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" href="light.css" media="(prefers-color-scheme: light)">
</head>
<body>
    <nav class="navbar navbar-expand-lg shadow-sm">
        <div class="container">
            <a class="navbar-brand text-danger fw-bold" href="index.html">üç≥ –ö—É–ª–∏–Ω–∞—Ä–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="search.html">–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="profile.html">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                    </li>
                </ul>
                <div class="navbar-nav">
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                            <span id="userNameNav">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="profile.html">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a></li>
                            <li><a class="dropdown-item" href="#">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#" id="logoutBtn">–í—ã–π—Ç–∏</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="container my-5">
        <div class="row">
            <div class="col-lg-4 mb-4">
                <div class="card shadow-sm border-0 mb-4">
                    <div class="card-body text-center">
                        <div class="position-relative d-inline-block mb-3">
                            <img src="https://static.vecteezy.com/system/resources/previews/024/983/914/large_2x/simple-user-default-icon-free-png.png" alt="User image" id="userImage" height="100" width="100" style="border-radius: 100px; object-fit: cover;">
                        </div>
                        <h4 class="card-title mb-1" id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h4>
                        <p class="text-muted mb-1" id="userEmail">email@example.com</p>
                        <p class="strong mb-3" id="userBio">Bio</p>
                        
                        <div class="row text-center mb-3">
                            <div class="col-4">
                                <div class="">
                                    <div class="h5 mb-1 text-danger" id="recipesCount">2</div>
                                    <small class="text-muted">–†–µ—Ü–µ–ø—Ç–∞</small>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="">
                                    <div class="h5 mb-1 text-danger" id="followersCount">10</div>
                                    <small class="text-muted">–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</small>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="h5 mb-1 text-danger" id="followingCount">20</div>
                                <small class="text-muted">–ü–æ–¥–ø–∏—Å–æ–∫</small>
                            </div>
                        </div>
                        
                        <button class="btn btn-danger w-100">
                            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                        </button>
                    </div>
                </div>

                <div class="card shadow-sm border-0">
                    <div class="card-body">
                        <div class="nav flex-column">
                            <a class="nav-link active d-flex align-items-center py-2" href="#my-recipes" data-bs-toggle="tab">
                                <svg width="16" height="16" fill="currentColor" class="bi bi-book-half me-2">
                                    <use xlink:href="sprite.svg#book-half"></use>
                                </svg>
                                <span>–ú–æ–∏ —Ä–µ—Ü–µ–ø—Ç—ã</span>
                            </a>
                            <a class="nav-link d-flex align-items-center py-2" href="#saved-recipes" data-bs-toggle="tab">
                                <svg width="16" height="16" fill="currentColor" class="bi bi-bookmark-fill me-2" >
                                    <use xlink:href="sprite.svg#bookmark-fill"></use>
                                </svg>
                                <span>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ</span>
                            </a>
                            <a class="nav-link d-flex align-items-center py-2" href="#favorites" data-bs-toggle="tab">
                                <svg width="16" height="16" fill="currentColor" class="bi bi-star-fill me-2" >
                                    <use xlink:href="sprite.svg#bookmark-fill"></use>
                                </svg>
                                <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                            </a>
                            <a class="nav-link d-flex align-items-center py-2" href="#followers" data-bs-toggle="tab">
                                <svg width="16" height="16" fill="currentColor" class="bi bi-people-fill me-2" >
                                    <use xlink:href="sprite.svg#people-fill"></use>
                                </svg>
                                <span></span>–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</span>
                            </a>
                            <a class="nav-link d-flex align-items-center py-2" href="#following" data-bs-toggle="tab">
                                <svg width="16" height="16" fill="currentColor" class="bi bi-rss-fill me-2" >
                                    <use xlink:href="sprite.svg#rss-fill"></use>
                                </svg>
                                <span></span>–ü–æ–¥–ø–∏—Å–∫–∏</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="my-recipes">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="mb-0">–ú–æ–∏ —Ä–µ—Ü–µ–ø—Ç—ã</h4>
                            <button class="btn btn-danger">
                                <svg width="20" height="20" fill="currentColor" class="bi bi-plus-circle mb-1 me-1" >
                                    <use xlink:href="sprite.svg#plus-circle"></use>
                                </svg>
                                <span>–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</span>
                            </button>
                        </div>

                        <div class="row px-3 mb-4" id="myRecipesGrid">
                            <a class="nav-link col me-4" href="recipe.html">
                                <div class="card p-4">
                                    <img src="https://img.freepik.com/free-photo/top-view-table-full-food_23-2149209253.jpg?t=st=1763757351~exp=1763760951~hmac=73f4ed9da6e37e38ea22f47537a14bb9758f4631988d69e3ad390fecfded46a3&w=1480" class="card-img-top" alt="...">
                                    <div class="mt-4">
                                        <h5 class="card-title">–ë—ã—Å—Ç—Ä—ã–π —Ä–µ—Ü–µ–ø—Ç</h5>
                                        <p class="card-text">–û–ø–∏—Å–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞</p>
                                    </div>
                                </div>
                            </a>
                            <a class="nav-link col" href="recipe.html">
                                <div class="card p-4">
                                    <img src="https://img.freepik.com/free-photo/top-view-table-full-food_23-2149209253.jpg?t=st=1763757351~exp=1763760951~hmac=73f4ed9da6e37e38ea22f47537a14bb9758f4631988d69e3ad390fecfded46a3&w=1480" class="card-img-top" alt="...">
                                    <div class="mt-4">
                                        <h5 class="card-title">–í–∫—É—Å–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç</h5>
                                        <p class="card-text">–û–ø–∏—Å–∞–Ω–∏–µ –≤–∫—É—Å–Ω–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        
                    </div>

                    <div class="tab-pane fade" id="saved-recipes">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="mb-0">–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã</h4>
                            <span class="badge bg-secondary" id="savedCount">2 —Ä–µ—Ü–µ–ø—Ç–∞</span>
                        </div>
                        
                        <div class="row px-3 mb-4" id="savedRecipesGrid">
                            <a class="nav-link col me-4" href="recipe.html">
                                <div class="card p-4">
                                    <img src="https://img.freepik.com/free-photo/top-view-table-full-food_23-2149209253.jpg?t=st=1763757351~exp=1763760951~hmac=73f4ed9da6e37e38ea22f47537a14bb9758f4631988d69e3ad390fecfded46a3&w=1480" class="card-img-top" alt="...">
                                    <div class="mt-4">
                                        <h5 class="card-title">–ë—ã—Å—Ç—Ä—ã–π —Ä–µ—Ü–µ–ø—Ç</h5>
                                        <p class="card-text">–û–ø–∏—Å–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞</p>
                                    </div>
                                </div>
                            </a>
                            <a class="nav-link col" href="recipe.html">
                                <div class="card p-4">
                                    <img src="https://img.freepik.com/free-photo/top-view-table-full-food_23-2149209253.jpg?t=st=1763757351~exp=1763760951~hmac=73f4ed9da6e37e38ea22f47537a14bb9758f4631988d69e3ad390fecfded46a3&w=1480" class="card-img-top" alt="...">
                                    <div class="mt-4">
                                        <h5 class="card-title">–í–∫—É—Å–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç</h5>
                                        <p class="card-text">–û–ø–∏—Å–∞–Ω–∏–µ –≤–∫—É—Å–Ω–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="favorites">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="mb-0">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h4>
                            <span class="badge bg-secondary" id="favoritesCount">0 —Ä–µ—Ü–µ–ø—Ç–æ–≤</span>
                        </div>
                        
                        <div class="row" id="favoritesGrid">
                        </div>
                    </div>

                    <div class="tab-pane fade" id="followers">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="mb-0">–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</h4>
                            <span class="badge bg-secondary" id="followersTotal">0 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</span>
                        </div>
                        
                        <div class="card shadow-sm border-0">
                            <div class="card-body">
                                <div id="followersList">
                                    <div class="card p-4 mb-3">
                                        <div class="d-flex">
                                            <svg width="55" height="55" fill="currentColor" class="bi bi-person-circle me-3" >
                                                <use xlink:href="sprite.svg#person-circle"></use>
                                            </svg>
                                            <div>
                                                <h5 class="card-title">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</h5>
                                                <p class="card-text">–®–µ—Ñ-–ø–æ–≤–∞—Ä</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card p-4 mb-3">
                                        <div class="d-flex">
                                            <svg width="55" height="55" fill="currentColor" class="bi bi-person-circle me-3" >
                                                <use xlink:href="sprite.svg#person-circle"></use>
                                            </svg>
                                            <div>
                                                <h5 class="card-title">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</h5>
                                                <p class="card-text">–®–µ—Ñ-–ø–æ–≤–∞—Ä</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card p-4">
                                        <div class="d-flex">
                                            <svg width="55" height="55" fill="currentColor" class="bi bi-person-circle me-3" >
                                                <use xlink:href="sprite.svg#person-circle"></use>
                                            </svg>
                                            <div>
                                                <h5 class="card-title">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</h5>
                                                <p class="card-text">–®–µ—Ñ-–ø–æ–≤–∞—Ä</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="following">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="mb-0">–ü–æ–¥–ø–∏—Å–∫–∏</h4>
                            <span class="badge bg-secondary" id="followingTotal">0 –ø–æ–¥–ø–∏—Å–æ–∫</span>
                        </div>
                        
                        <div class="card shadow-sm border-0">
                            <div class="card-body">
                                <div id="followingList">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="index.js"></script>
    <script>
        const access_token = localStorage.getItem("access_token");
        if (!access_token) {
            window.location.href = "login.html";
        }

        const usernameField = document.querySelector("#userName");
        const emailField = document.querySelector("#userEmail");
        const userImageField = document.querySelector("#userImage");
        const userBioField = document.querySelector("#userBio");

        fetch("http://localhost/api/users/me", {
          method: "GET",
          headers: {
            accept: "application/json",
            "Content-Type": "application/json",
            authorization: `Bearer ${access_token}`,
          },
        }).then(r => r.json().then(json => {
            usernameField.innerHTML = json["username"];
            emailField.innerHTML = json["email"];
            userImageField.src = json["profile_picture"];
            userBioField.innerHTML = json["bio"];
        }))

    </script>
</body>
</html>
