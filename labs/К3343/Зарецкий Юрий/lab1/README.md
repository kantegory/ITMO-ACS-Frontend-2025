# Лабораторная работа 1 - Аренда недвижимости

Приложение для аренды недвижимости с использованием JSON Server и Axios.

## Установка и запуск

### 1. Установка зависимостей

```bash
npm install
```

### 2. Запуск JSON Server

```bash
npm run server
```

или

```bash
npm start
```

Сервер будет запущен на порту 3001: `http://localhost:3001`

### 3. Открытие приложения

Откройте файл `index.html` в браузере или используйте локальный веб-сервер.

## Структура проекта

- `db.json` - База данных для JSON Server (пользователи, недвижимость, аренды)
- `server.js` - Сервер с middleware для авторизации
- `js/api.js` - API клиент на основе Axios
- `js/main.js` - Основная логика приложения
- `data/` - Исходные JSON файлы (используются только для справки)

## API Endpoints

### Публичные эндпоинты (не требуют авторизации)

- `GET /apartments` - Получить весь список недвижимости
- `GET /apartments/:id` - Получить недвижимость по ID
- `POST /login` - Авторизация пользователя
- `POST /register` - Регистрация нового пользователя

### Защищенные эндпоинты (требуют токен авторизации)

- `GET /users` - Получить всех пользователей
- `GET /users/:id` - Получить пользователя по ID
- `GET /apartments?ownerId=:id` - Получить недвижимость пользователя
- `GET /rentedApartments?tenantId=:id` - Получить арендованную недвижимость
- `POST /rentedApartments` - Создать запись об аренде

## Авторизация

Приложение использует токен-базированную авторизацию. После успешного входа или регистрации токен сохраняется в localStorage и автоматически добавляется к каждому запросу через Axios interceptor.

Формат токена: `Bearer <base64-encoded-token>`

## Тестовые пользователи

В базе данных уже есть тестовые пользователи:

1. Email: `ivan@example.com`, Пароль: `password123`
2. Email: `maria@example.com`, Пароль: `password123`
3. Email: `alex@example.com`, Пароль: `password123`

## Особенности реализации

- Использование Axios для HTTP запросов
- Автоматическое добавление токена авторизации к запросам
- Обработка ошибок авторизации (401) с автоматическим перенаправлением на страницу входа
- Кэширование данных в localStorage для офлайн-доступа
- Middleware на сервере для проверки авторизации



