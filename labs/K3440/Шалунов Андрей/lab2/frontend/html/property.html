<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Объявление</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="bg-light">
    <a href="#main-content" class="visually-hidden-focusable">Перейти к основному содержимому</a>

    <nav class="navbar navbar-light bg-light border-bottom" role="navigation" aria-label="Основная навигация">
        <div class="container-fluid px-4">
            <a class="navbar-brand" href="search.html">Аренда жилья</a>
            <div>
                <a href="search.html" class="btn btn-outline-primary btn-sm me-2">Поиск</a>
                <a href="my-properties.html" class="btn btn-outline-primary btn-sm me-2">Мои объявления</a>
                <a href="profile.html" class="btn btn-outline-primary btn-sm me-2">Профиль</a>
                <a href="signin.html" id="logout-btn" class="btn btn-outline-secondary btn-sm">Выйти</a>
            </div>
        </div>
    </nav>

    <div class="modal fade" id="messageModal" tabindex="-1" role="dialog" aria-modal="true" aria-labelledby="messageModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title fs-6" id="messageModalTitle">Написать владельцу</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    <form id="messageForm">
                        <div class="mb-3">
                            <label class="form-label" for="messageSubject">Тема</label>
                            <input
                                type="text"
                                class="form-control"
                                id="messageSubject"
                                placeholder="Например: Вопрос по аренде"
                            >
                        </div>
                        <div class="mb-3">
                            <label class="form-label" for="messageText">Сообщение</label>
                            <textarea
                                class="form-control"
                                id="messageText"
                                rows="4"
                                placeholder="Здравствуйте, скажите, пожалуйста..."
                                aria-describedby="messageError"
                            ></textarea>
                        </div>
                        <p class="text-danger small mb-0 d-none" id="messageError" role="alert" aria-live="assertive">
                            Напишите, пожалуйста, текст сообщения.
                        </p>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="sendMessageBtn">Отправить сообщение</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-modal="true" aria-labelledby="successModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title fs-6" id="successModalTitle">Успешно</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-0" id="successText">
                        Действие выполнено успешно.
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-bs-dismiss="modal">Ок</button>
                </div>
            </div>
        </div>
    </div>

    <main id="main-content" class="container py-4">
        <nav aria-label="Хлебные крошки" class="mb-3">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="search.html">Поиск</a></li>
                <li class="breadcrumb-item active" aria-current="page" data-property-breadcrumb>Объявление</li>
            </ol>
        </nav>

        <h1 class="mb-1 h2" data-property-title>Объявление</h1>
        <p class="text-muted mb-4" data-property-address>Адрес будет загружен</p>

        <div class="row g-4 mb-4">
            <div class="col-12 col-lg-7">
                <div class="card mb-3 property-main-photo position-relative">
                    <img
                        id="mainPhoto"
                        class="card-img-top"
                        alt="Фото объекта"
                    >
                    <button type="button" class="btn btn-light btn-sm gallery-nav gallery-prev" aria-label="Предыдущее фото">
                        &#10094;
                    </button>
                    <button type="button" class="btn btn-light btn-sm gallery-nav gallery-next" aria-label="Следующее фото">
                        &#10095;
                    </button>
                </div>

                <div class="row g-2 gallery-thumbs" data-gallery-thumbs aria-label="Миниатюры фотографий"></div>
            </div>

            <div class="col-12 col-lg-5">
                <div class="card mb-3">
                    <div class="card-body">
                        <h2 class="card-title mb-3 h4" data-property-price>Цена уточняется</h2>
                        <p class="mb-1">
                            <strong>Тип:</strong>
                            <span data-property-type>—</span>
                        </p>
                        <p class="mb-1">
                            <strong>Статус:</strong>
                            <span data-property-status>—</span>
                        </p>
                    </div>
                </div>

                <div class="card mb-3">
                    <div class="card-body">
                        <h3 class="card-title mb-3 h5">Владелец</h3>
                        <p class="mb-1">
                            <strong>Имя:</strong>
                            <span data-owner-name>—</span>
                        </p>
                        <p class="mb-2">
                            <strong>Телефон:</strong>
                            <span id="ownerPhone" class="text-muted">+7-***-***-**-**</span>
                        </p>
                        <button class="btn btn-outline-primary btn-sm" id="showPhoneBtn" type="button" aria-label="Показать номер телефона владельца">
                            Показать номер
                        </button>
                    </div>
                </div>

                <div class="card mb-3">
                    <div class="card-body">
                        <h3 class="card-title mb-3 h5">Условия аренды</h3>
                        <ul class="mb-0" data-property-rental-terms>
                            <li class="text-muted small">Информация будет загружена с сервера.</li>
                        </ul>
                    </div>
                </div>

                <div class="card mb-3">
                    <div class="card-body">
                        <h3 class="card-title mb-3 h5">Бронирование</h3>
                        <form id="bookingForm" aria-describedby="bookingError">
                            <div class="mb-2">
                                <label for="bookingStart" class="form-label">Дата заезда</label>
                                <input
                                    type="date"
                                    class="form-control form-control-sm"
                                    id="bookingStart"
                                >
                            </div>
                            <div class="mb-2">
                                <label for="bookingEnd" class="form-label">Дата выезда</label>
                                <input
                                    type="date"
                                    class="form-control form-control-sm"
                                    id="bookingEnd"
                                >
                            </div>
                            <p class="mb-2">
                                <strong>Итого:</strong>
                                <span id="bookingTotal">—</span>
                            </p>
                            <p class="text-danger small mb-2 d-none" id="bookingError" role="alert" aria-live="assertive">
                                Пожалуйста, проверьте даты бронирования.
                            </p>
                            <div class="d-flex justify-content-center mt-2">
                                <button
                                    type="submit"
                                    class="btn btn-primary btn-sm btn-booking"
                                    id="createBookingBtn"
                                >
                                    Забронировать
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="d-grid gap-2">
                    <button
                        class="btn btn-primary"
                        data-bs-toggle="modal"
                        data-bs-target="#messageModal"
                        type="button"
                    >
                        Написать владельцу
                    </button>
                    <a href="search.html" class="btn btn-outline-secondary">
                        Вернуться к поиску
                    </a>
                </div>
            </div>
        </div>

        <div class="row g-4 align-items-stretch">
            <div class="col-12 col-lg-8">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title mb-3 h5">Описание</h3>
                        <p class="mb-0" data-property-description>
                            Описание объекта будет загружено с сервера.
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title mb-3 h5">Особенности</h3>
                        <ul class="mb-0" data-property-features>
                            <li class="text-muted small">Информация будет загружена с сервера.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="../js/property-page.js"></script>
</body>
</html>