# Сервис для аренды недвижимости

Лабораторная работа 3 - Курс "Архитектура клиентских систем"
ИТМО, К3440, Хурс Павел

## Описание проекта

Современный веб-сервис для поиска и аренды недвижимости, построенный на Next.js 15 с использованием Tailwind CSS и TypeScript. Проект реализует полный функционал для работы с объявлениями о недвижимости, включая систему авторизации, поиск с фильтрами, избранное и личный кабинет.

## Технологический стек

### Core
- **Next.js 15** - React-фреймворк с App Router
- **React 19** - UI библиотека
- **TypeScript** - типизация
- **Tailwind CSS** - стилизация

### UI компоненты
- **shadcn/ui** - библиотека UI компонентов на базе Radix UI
- **lucide-react** - иконки
- **class-variance-authority** - управление вариантами стилей

### Управление состоянием
- **React Context API** - глобальное состояние (Auth, Theme, Favorites)
- **Custom Hooks** - переиспользуемая логика

### Формы и валидация
- **react-hook-form** - управление формами
- **zod** - схемы валидации
- **@hookform/resolvers** - интеграция zod с react-hook-form

### Дополнительно
- **zustand** - легковесное управление состоянием (для будущих доработок)
- **react-leaflet** + **leaflet** - карты (подготовлено для интеграции)
- **date-fns** - работа с датами
- **uuid** - генерация уникальных ID

## Реализованные функции

### Обязательные страницы

✅ **Главная страница** (`/`)
- Hero-секция с призывом к действию
- Карточки преимуществ сервиса
- Популярные предложения недвижимости
- Адаптивный дизайн

✅ **Вход** (`/login`)
- Форма авторизации с валидацией
- Обработка ошибок
- Автоматический редирект после входа
- Тестовые учетные данные: `test@test.com` / `password123`

✅ **Регистрация** (`/register`)
- Форма регистрации с полями: email, пароль, имя, телефон
- Валидация всех полей
- Автоматический вход после регистрации

✅ **Поиск недвижимости** (`/properties`)
- Фильтрация по типу недвижимости
- Фильтрация по расположению
- Фильтрация по диапазону цен
- Адаптивная сетка карточек (1-3 колонки)
- Состояния загрузки и пустого результата

✅ **Страница объекта** (`/properties/[id]`)
- Галерея изображений
- Полная информация об объекте
- Характеристики с иконками
- Условия аренды
- Контакты владельца
- Кнопка добавления в избранное

✅ **Личный кабинет** (`/profile`)
- Информация о пользователе
- Защищенный маршрут (требуется авторизация)
- Кнопка выхода

### Дополнительные функции

✅ **Смена темы**
- Светлая и темная тема
- Переключатель в Header
- Сохранение предпочтений в localStorage
- CSS переменные для всех цветов
- Поддержка системных предпочтений

✅ **Система избранного**
- Добавление/удаление объектов в избранное
- Счетчик избранного в Header
- Синхронизация между вкладками браузера
- Сохранение в localStorage
- Визуальная индикация (красное сердце)

✅ **Адаптивная верстка**
- Мобильные устройства (320px+)
- Планшеты (768px+)
- Десктоп (1024px+)
- Широкие экраны (1280px+)

✅ **UX улучшения**
- Skeleton loaders при загрузке
- Пустые состояния
- Обработка ошибок
- Плавные переходы и анимации
- Accessibility (ARIA атрибуты, keyboard navigation)

## Backend API

Проект использует **Next.js API Routes** для создания mock API:

### Эндпоинты

**Авторизация:**
- `POST /api/auth/login` - вход
- `POST /api/auth/register` - регистрация
- `POST /api/auth/logout` - выход

**Недвижимость:**
- `GET /api/properties` - список с фильтрацией
  - Query params: `type`, `location`, `minPrice`, `maxPrice`, `rooms`
- `GET /api/properties/[id]` - один объект

**Избранное:**
- `GET /api/favorites` - список избранного
- `POST /api/favorites` - добавить в избранное
- `DELETE /api/favorites` - удалить из избранного

**Данные** хранятся в JSON файлах в папке `data/`:
- `properties.json` - 5 тестовых объектов недвижимости
- `users.json` - тестовые пользователи

## Структура проекта

```
LR3/
├── app/                          # Next.js App Router
│   ├── api/                      # API Routes (mock backend)
│   │   ├── auth/                 # Авторизация
│   │   │   ├── login/route.ts
│   │   │   ├── register/route.ts
│   │   │   └── logout/route.ts
│   │   ├── properties/           # Недвижимость
│   │   │   ├── route.ts          # Список с фильтрами
│   │   │   └── [id]/route.ts     # Один объект
│   │   └── favorites/            # Избранное
│   │       └── route.ts
│   ├── login/                    # Страница входа
│   │   └── page.tsx
│   ├── register/                 # Страница регистрации
│   │   └── page.tsx
│   ├── profile/                  # Личный кабинет
│   │   └── page.tsx
│   ├── properties/               # Недвижимость
│   │   ├── page.tsx              # Список с фильтрами
│   │   └── [id]/page.tsx         # Страница объекта
│   ├── layout.tsx                # Root layout с провайдерами
│   ├── page.tsx                  # Главная страница
│   └── globals.css               # Глобальные стили
├── components/
│   ├── ui/                       # shadcn/ui компоненты
│   │   ├── button.tsx
│   │   ├── card.tsx
│   │   ├── input.tsx
│   │   ├── select.tsx
│   │   ├── badge.tsx
│   │   ├── skeleton.tsx
│   │   ├── dropdown-menu.tsx
│   │   └── label.tsx
│   ├── layout/                   # Layout компоненты
│   │   ├── Header.tsx            # Шапка сайта
│   │   ├── Footer.tsx            # Подвал
│   │   └── ThemeToggle.tsx       # Переключатель темы
│   └── properties/               # Компоненты недвижимости
│       └── PropertyCard.tsx      # Карточка объекта
├── contexts/                     # React Contexts
│   ├── AuthContext.tsx           # Авторизация
│   ├── ThemeContext.tsx          # Темы
│   └── FavoritesContext.tsx      # Избранное
├── hooks/                        # Custom hooks
│   ├── useProperties.ts          # Работа со списком
│   ├── useProperty.ts            # Работа с одним объектом
│   └── useLocalStorage.ts        # Работа с localStorage
├── types/                        # TypeScript типы
│   ├── property.ts               # Property, PropertyType
│   ├── user.ts                   # User
│   ├── rental.ts                 # Rental
│   └── message.ts                # Message
├── data/                         # Mock данные
│   ├── properties.json           # Объекты недвижимости
│   └── users.json                # Пользователи
├── lib/                          # Утилиты
│   ├── utils.ts                  # Общие утилиты
│   └── constants.ts              # Константы
├── public/                       # Статические файлы
│   └── images/                   # Изображения
├── components.json               # shadcn/ui конфиг
├── next.config.mjs               # Next.js конфиг
├── tailwind.config.ts            # Tailwind конфиг
├── tsconfig.json                 # TypeScript конфиг
└── package.json                  # Зависимости
```

## Установка и запуск

### Требования
- Node.js 18.17 или выше
- npm, yarn, pnpm или bun

### Установка зависимостей

```bash
npm install
```

### Запуск dev-сервера

```bash
npm run dev
```

Откройте [http://localhost:3000](http://localhost:3000) в браузере.

### Сборка для продакшена

```bash
npm run build
npm start
```

### Линтинг

```bash
npm run lint
```

## Тестовые данные

### Учетная запись для входа
- **Email:** `test@test.com`
- **Пароль:** `password123`

### Доступные объекты недвижимости
В системе предзагружено 5 тестовых объектов:
- Квартира в Москве, Центральный район
- Дом в Подмосковье
- Студия в Санкт-Петербурге
- Квартира в Москве, Южное Бутово
- Комната в квартире, Санкт-Петербург

## Соответствие требованиям задания

### Из README курса

✅ **Роутер подключен** - Next.js App Router
✅ **Работа с API** - Next.js API Routes с mock данными
✅ **Разумное деление на компоненты** - четкая структура `components/`
✅ **Использование custom hooks** - аналог composable из Vue
✅ **Все обязательные страницы присутствуют:**
- Главная (`/`)
- Вход (`/login`)
- Регистрация (`/register`)
- Поиск (`/properties`)
- Страница объекта (`/properties/[id]`)
- Личный кабинет (`/profile`)

✅ **Смена темы** - полная реализация с CSS переменными
✅ **Дополнительные фичи:**
- Система избранного
- Адаптивная верстка
- Skeleton loaders
- TypeScript типизация

### Архитектурные решения

**Почему Next.js API Routes вместо отдельного сервера:**
- Упрощенная разработка и деплой
- Единая кодовая база
- Нативная поддержка TypeScript
- Автоматический роутинг

**Почему shadcn/ui:**
- Полностью кастомизируемые компоненты
- Copy-paste подход (не зависимость)
- Встроенная поддержка темизации
- Accessibility из коробки

**Почему React Context API:**
- Нативное решение React
- Достаточно для проекта такого масштаба
- Простая интеграция с Next.js
- Хорошая производительность

## Возможные улучшения

### Функциональность
- [ ] Интеграция карты (react-leaflet уже установлен)
- [ ] Страница истории сообщений и сделок
- [ ] Фильтр по количеству комнат
- [ ] Сортировка результатов поиска
- [ ] Пагинация списка объектов
- [ ] Полноценная система бронирования
- [ ] Push-уведомления о новых объектах

### Техническая часть
- [ ] Unit тесты (Jest + React Testing Library)
- [ ] E2E тесты (Playwright)
- [ ] Оптимизация изображений (next/image)
- [ ] Интернационализация (i18n)
- [ ] PWA поддержка
- [ ] SEO оптимизация (метатеги, sitemap)
- [ ] Аналитика (Google Analytics / Яндекс.Метрика)

### Backend
- [ ] Реальная база данных (PostgreSQL + Prisma)
- [ ] Реальная авторизация (NextAuth.js)
- [ ] API валидация (zod на сервере)
- [ ] Загрузка файлов (изображения объектов)
- [ ] WebSocket для real-time обновлений

## Полезные ссылки

- [Next.js Documentation](https://nextjs.org/docs)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [shadcn/ui](https://ui.shadcn.com/)
- [TypeScript](https://www.typescriptlang.org/docs/)
- [React Hook Form](https://react-hook-form.com/)
- [Zod](https://zod.dev/)

## Автор

Хурс Павел
ИТМО, К3440
2025
