<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RentEstate — аренда недвижимости</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <script>
    window.API_BASE = window.API_BASE || "http://localhost:4000";
  </script>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-theme bg-primary"
  aria-label="Главная навигация сайта">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="./index.html">
      <svg class="icon me-2" aria-hidden="true">
        <use href="assets/icons.svg#icon-house-heart"></use>
      </svg>
      <span>RentEstate</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Открыть меню навигации">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul id="navbarNavLinks"
          class="navbar-nav ms-auto"
          role="menubar"
          aria-label="Основные разделы сайта">
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-4">
  <h1 class="text-center mb-4">Найдите идеальную недвижимость для аренды</h1>

  <div class="card mb-4">
    <div class="card-body">
      <h5 class="card-title" id="searchTitle">Фильтры поиска</h5>

      <form id="searchForm"
            class="row g-3"
            role="search"
            aria-labelledby="searchTitle"
            aria-describedby="searchHint">

        <p id="searchHint" class="visually-hidden">
          Используйте фильтры ниже, чтобы найти подходящую недвижимость для аренды
        </p>

        <fieldset class="row g-3 border-0 p-0 m-0">
          <legend class="visually-hidden">Параметры поиска недвижимости</legend>

          <div class="col-md-3">
            <label for="location" class="form-label">Местоположение</label>
            <input type="text"
                   id="location"
                   class="form-control"
                   placeholder="Город, район"
                   autocomplete="address-level2">
          </div>

          <div class="col-md-2">
            <label for="propertyType" class="form-label">Тип недвижимости</label>
            <select id="propertyType"
                    class="form-select">
              <option value="">Все</option>
            </select>
          </div>

          <div class="col-md-2">
            <label for="rentalType" class="form-label">Тип аренды</label>
            <select id="rentalType"
                    class="form-select">
              <option value="">Все</option>
            </select>
          </div>

          <div class="col-md-2">
            <label for="minPrice" class="form-label">Мин. цена</label>
            <input type="number"
                   id="minPrice"
                   class="form-control"
                   inputmode="numeric"
                   min="0"
                   step="1000"
                   placeholder="От"
                   aria-describedby="priceHint">
          </div>

          <div class="col-md-2">
            <label for="maxPrice" class="form-label">Макс. цена</label>
            <input type="number"
                   id="maxPrice"
                   class="form-control"
                   inputmode="numeric"
                   min="0"
                   step="1000"
                   placeholder="До"
                   aria-describedby="priceHint">
          </div>

          <div class="col-md-1 d-flex align-items-end">
            <button type="submit"
                    class="btn btn-primary w-100"
                    aria-label="Найти объекты недвижимости">
              Найти
            </button>
          </div>

          <p id="priceHint" class="visually-hidden">
            Укажите диапазон цены в рублях. Минимальная цена не может быть больше максимальной
          </p>
        </fieldset>
      </form>

      <div class="mt-3">
        <button id="resetFilters"
                type="button"
                class="btn btn-outline-secondary"
                aria-label="Сбросить все фильтры поиска">
          Сбросить фильтры
        </button>
      </div>
    </div>
  </div>

  <div id="propertiesList" class="row"></div>

  <div id="noResults" class="text-center d-none">
    <div class="alert alert-info">По вашему запросу ничего не найдено.</div>
  </div>
</div>

<footer class="bg-dark text-light mt-5 py-4">
  <div class="container text-center">
    <p>&copy; 2025 RentEstate. Сервис аренды недвижимости.</p>
  </div>
</footer>

<div class="modal fade"
     id="propertyModal"
     tabindex="-1"
     role="dialog"
     aria-modal="true"
     aria-labelledby="modalPropertyTitle"
     aria-describedby="modalPropertyDescription">

  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <h5 id="modalPropertyTitle" class="modal-title"></h5>
        <button class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Закрыть окно с деталями объекта"></button>
      </div>

      <div class="modal-body">
        <div class="row">
          <div class="col-md-6">
            <img id="modalPropertyImage"
                 src=""
                 class="img-fluid rounded mb-3"
                 style="max-height:300px; width:100%; object-fit:cover;">
          </div>

          <div class="col-md-6">
            <p>
              <strong>
                <svg class="icon me-2" aria-hidden="true">
                  <use href="assets/icons.svg#icon-geo"></use>
                </svg>
                Адрес:
              </strong>
              <span id="modalPropertyLocation"></span>
            </p>

            <p>
              <strong>
                <svg class="icon me-2" aria-hidden="true">
                  <use href="assets/icons.svg#icon-house"></use>
                </svg>
                Тип:
              </strong>
              <span id="modalPropertyType"></span>
            </p>

            <p>
              <strong>
                <svg class="icon me-2" aria-hidden="true">
                  <use href="assets/icons.svg#icon-calendar"></use>
                </svg>
                Аренда:
              </strong>
              <span id="modalRentalType"></span>
            </p>

            <p>
              <strong>
                <svg class="icon me-2" aria-hidden="true">
                  <use href="assets/icons.svg#icon-ruble"></use>
                </svg>
                Цена:
              </strong>
              <span id="modalPropertyPrice"></span>
            </p>

            <p id="modalPropertyArea" class="d-none">
              <strong>Площадь:</strong> <span></span>
            </p>

            <p id="modalPropertyRooms" class="d-none">
              <strong>Комнат:</strong> <span></span>
            </p>

            <p><strong>Описание:</strong></p>
            <p id="modalPropertyDescription" class="modal-description"></p>

            <div id="modalPropertyAmenities" class="d-none">
              <p><strong>Удобства:</strong></p>
              <div id="modalAmenitiesList"
                   class="d-flex flex-wrap gap-1"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary"
                data-bs-dismiss="modal">
          Закрыть
        </button>

        <button class="btn btn-outline-primary"
                id="modalChatBtn"
                aria-label="Начать чат с владельцем">
          <svg class="icon me-2" aria-hidden="true">
            <use href="assets/icons.svg#icon-chat"></use>
          </svg>
          Начать чат
        </button>

        <button class="btn btn-primary"
                id="modalRentBtn"
                aria-label="Перейти к аренде объекта">
          Арендовать
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade"
     id="rentalModal"
     tabindex="-1"
     role="dialog"
     aria-modal="true"
     aria-labelledby="rentalModalTitle">

  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <h5 id="rentalModalTitle" class="modal-title">
          Оформление аренды
        </h5>

        <button class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Закрыть окно оформления аренды"></button>
      </div>

      <div id="rentalModalBody" class="modal-body">
        <div class="rental-summary mb-4">
          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h6 class="text-muted mb-1">Оформление аренды</h6>
              <h5 id="rentalPropertyTitle" class="mb-2"></h5>
              <div class="text-muted small">
                Вы подтверждаете заявку на аренду выбранного объекта
              </div>
            </div>
          </div>
        </div>

        <form id="rentalForm" class="rental-form">
          <input type="hidden" id="rentalPropertyId">

          <div class="row g-3 mb-3">
            <div class="col-md-6">
              <label for="rentalStart" class="form-label">
                <svg class="icon me-1">
                  <use href="assets/icons.svg#icon-calendar"></use>
                </svg>
                Дата начала
              </label>
              <input type="date"
                     id="rentalStart"
                     class="form-control form-control-lg"
                     required>
            </div>

            <div class="col-md-6">
              <label for="rentalEnd" class="form-label">
                <svg class="icon me-1">
                  <use href="assets/icons.svg#icon-calendar"></use>
                </svg>
                Дата окончания
              </label>
              <input type="date"
                     id="rentalEnd"
                     class="form-control form-control-lg"
                     required>
            </div>
          </div>

          <div class="rental-info-box mb-4">
            <svg class="icon me-2 text-primary">
              <use href="assets/icons.svg#icon-info-circle"></use>
            </svg>
            Владелец получит вашу заявку и свяжется с вами для подтверждения аренды.
          </div>

          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary btn-lg">
              Оформить аренду
            </button>

            <button type="button"
                    class="btn btn-outline-secondary"
                    data-bs-dismiss="modal">
              Отмена
            </button>
          </div>
        </form>
      </div>
    </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" src="js/core/navbar.js"></script>
<script type="module" src="js/pages/main.js"></script>
<script type="module" src="js/core/theme.js"></script>
</body>
</html>